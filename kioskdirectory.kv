#:kivy 1.8.0

<KioskView>:
    gameworld: gameworld
    pos: root.pos
    size: root.size
    GameWorld:
        id: gameworld
        size: root.size[0], root.size[1]*.5
        on_size: print self.size
        pos: root.pos
        gamescreenmanager: gamescreenmanager
        GameView:
            system_id: 'default_gameview'
            focus_entity: False
            updateable: True
            gameworld: root.gameworld
            pos: gameworld.pos
            do_scroll: False
            size: root.size
            camera_pos: (27, 250)
        Position:
            system_id: 'position'
            gameworld: root.gameworld
        DynamicRendererNoTextures:
            system_id: 'shape_renderer'
            gameworld: root.gameworld
            shader_source: 'positioncolorshader.glsl'
            update_time: (1./10.)
        StoreData:
            system_id: 'store_data'
            gameworld: root.gameworld
            app: app
    GameScreenManager:
        id: gamescreenmanager
        size: root.size
        pos: root.pos
        gameworld: root.gameworld

<GameScreenManager>:
    gameworld: self.gameworld
    main_screen: main_screen
    MainScreen:
        id: main_screen
        gameworld: root.gameworld

<StoreLabel>:
    size_hint: (None, None)
    size: self.texture_size
    font_name: 'assets/fonts/Exo_2/Exo2-SemiBold.ttf'
    font_size: 14

<StoreData>:
    layout: layout
    FloatLayout:
        id: layout
        pos: root.pos
        size: root.size


<MainScreen@GameScreen>:
    name: 'main'
    button_layout: button_layout
    storelist: storelist
    store_information: store_information
    gameworld: self.gameworld
    FloatLayout:
        Image:
            size: (1080, 576)
            pos: (0, 1344)
            size_hint: (None, None)
            source: 'assets/ads/bextr.png'
        StackLayout:
            size_hint: (1.0, None)
            height: 128
            id: button_layout
            orientation: 'lr-tb'
            pos: (5, 360)
            padding: 15
            spacing: 15
            ToggleStoreButton:
                image_name: 'food'
                group_name: 'Food'
                color: (0.819607843, 0.278431373, 0.0, 1.0)
            ToggleStoreButton:
                image_name: 'movies'
                group_name: 'Movies'
                color: (0.941176471, 0.68627451, 0.0, 1.0)
            ToggleStoreButton:
                image_name: 'clothes'
                group_name: 'Clothes'
                color: (0.611764706, 1.0, 0.690196078, 1.0)
            ToggleStoreButton:
                image_name: 'home'
                group_name: 'Home'
                color: (0.839215686, 0.988235294, 0.02745098, 1.0)
            ToggleStoreButton:
                image_name: 'beauty&health'
                group_name: 'Beauty/Health'
                color: (0.537254902, 0.0, 0.639215686, 1.0)
            ToggleStoreButton:
                image_name: 'gifts'
                group_name: 'Gifts'
                color:  (0.298039216, 0.490196078, 1.0, 1.0)
            ToggleStoreButton:
                image_name: 'electronics'
                group_name: 'Electronics'
                color: (0.0, 0.501960784, 0.5019607841, 1.0)
            ToggleStoreButton:
                image_name: 'shoes'
                group_name: 'Shoes'
                color: (1.0, 0.450980392, 0.0, 1.0)
            ToggleStoreButton:
                image_name: 'jewelry'
                group_name: 'Jewelry'
                color: (1.0, 0.066666667, 0.815686275, 1.0)
            ToggleStoreButton:
                image_name: 'accessories'
                group_name: 'Accessories'
                color:  (0.0, 0.780392157, 0.192156863, 1.0)
        StoreList
            id: storelist
            size_hint: (1.0, None)
            orientation: 'lr-tb'
            gameworld: root.gameworld
            pos: (0, 160)
            padding: 15
            spacing: 15
            height: 220
        StoreInformation:
            id: store_information
            size_hint: (1.0, None)
            pos: (0, -200)
            height: 200


<AdManager@ScreenManager>:

<AdScreen>:
    Image
        source: root.source
        size: root.size
        pos: root.pos
        size_hint: (None, None)

<StoreInformation>:
    current_color: app.store_colors[self.store_group]
    canvas:
        Color:
            rgba: self.current_color
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: 'horizontal'
        padding: 5.0
        spacing: 5.0
        size_hint: (1.0, 1.0)
        size: root.size
        pos: root.pos
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (.5, 1.0)
            spacing: 15.0
            Image:
                size_hint: (None, None)
                size: (280, 190)
                source: 'assets/store_images/kittens.png'
            Image:
                size_hint: (None, None)
                size: (180, 190)
                pos_hint: {'x': .7}
                source: 'assets/store_images/kittens2.png'

        BoxLayout:
            orientation: 'vertical'
            spacing: 5.0
            id: l1
            size_hint: (.5, 1.0)
            Image:
                size_hint: (None, None)
                size: (425, 50)
                pos_hint: {'x': ((l1.width - 425)/2.)/l1.width}
                source: 'assets/store_images/logo.png'
            Label:
                text: root.store_name
                font_size: '18sp'
                color: (0.0, 0.0, 0.0, 1.0)
                size_hint: (1.0, .2)
                font_name: 'assets/fonts/Exo_2/Exo2-ExtraBold.ttf'
            Widget:
                size_hint: (1.0, .05)
                canvas:
                    Color: 
                        rgba: root.current_color[0]*.5, root.current_color[1]*.5, root.current_color[2]*.5, root.current_color[3]
                    Rectangle:
                        pos: self.pos[0] + self.size[0]*.25, self.pos[1] + self.size[1]*.25
                        size: self.size[0]*.5, self.size[1]*.5
            Label:
                text: '123.456.7890'
                font_size: '16sp'
                color: (0.0, 0.0, 0.0, 1.0)
                size_hint: (1.0, .15)
                font_name: 'assets/fonts/Exo_2/Exo2-SemiBoldItalic.ttf'
            Label:
                size_hint: (1.0, .55)
                text_size: self.size
                color: (0.0, 0.0, 0.0, 1.0)
                font_size: '14sp'
                font_name: 'assets/fonts/Exo_2/Exo2-SemiBold.ttf'
                text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.'
                valign: 'top'



<ToggleStoreButton>:
    orientation: 'tb-lr'
    on_release: app.root.highlight_group(self.group_name)
    size_hint: (None, None)
    width: 90
    root: app.root
    Widget:
        size_hint: (1.0, .6)
        canvas.before:
            Color:
                rgba: root.color if root.state == 'down' else root.reset_color
        canvas:
            Rectangle:
                source: 'assets/icons/' + root.image_name + '-256.png'
                pos: self.pos
                size: root.size[0], root.size[0]
        canvas.after:
            Color:
                rgba: 1., 1., 1., 1.
    Label:
        text: root.group_name
        size_hint: (1.0, .4)


